{% trans_default_domain 'feedbacks.tg' %}
{% apply spaceless %}
    {% set line = [] %}
    {% if search_term.messengerProfileUrl is not null %}
        {% set line = line|merge([
            [
                '<a href="' ~ search_term.messengerProfileUrl ~ '">',
                search_term.messengerUsername ?? search_term.messengerProfileUrl,
                '</a>'
            ]|join
        ]) %}
    {% elseif search_term.messengerUsername is not null %}
        {% set line = line|merge([
            search_term.messengerUsername
        ]) %}
    {% elseif search_term.type is not null and search_term.type.name == 'url' %}
        {% set line = line|merge([
            '<a href="' ~ search_term.text ~ '">' ~ search_term.normalizedText ~ '</a>'
        ]) %}
    {% elseif search_term.type is not null and search_term.type.name == 'phone_number' %}
        {% set line = line|merge([
            search_term.normalizedText
        ]) %}
    {% elseif search_term.type is not null and search_term.type.name == 'email' %}
        {% set line = line|merge([
            search_term.normalizedText
        ]) %}
    {% else %}
        {% set line = line|merge([
            search_term.text
        ]) %}
    {% endif %}

    {% if search_term.messengerUser is not null %}
        {% set line = line|merge([
            '/',
            search_term.messengerUser.name
        ]) %}
    {% endif %}

    {% if search_term.type is not null and search_term.type.name != 'unknown' %}
        {% set line = line|merge([
            '(' ~ search_term.type.name|trans({}, 'feedbacks.search_term_type') ~ ')'
        ]) %}
    {% endif %}

    {{ line|join(' ')|raw }}
{% endapply %}