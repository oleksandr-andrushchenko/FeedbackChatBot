<?xml version="1.0" encoding="UTF-8" ?>
<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services
        https://symfony.com/schema/dic/services/services-1.0.xsd">

    <services>
        <service id="app.telegram_bot_remover" class="App\Service\Telegram\Bot\TelegramBotRemover" lazy="true"/>
        <service id="app.telegram_bot_info_provider" class="App\Service\Telegram\Bot\TelegramBotInfoProvider"
                 lazy="true">
            <argument type="service" id="app.repository.telegram_bot_payment_method"/>
        </service>
        <service id="app.telegram_bot_descriptions_info_provider"
                 class="App\Service\Telegram\Bot\TelegramBotDescriptionsInfoProvider" lazy="true">
            <argument type="service" id="app.telegram_bot_registry"/>
        </service>
        <service id="app.telegram_link_provider" class="App\Service\Telegram\TelegramLinkProvider" lazy="true"/>
        <service id="app.telegram_bot_validator" class="App\Service\Telegram\Bot\TelegramBotValidator" lazy="true">
            <argument type="service" id="app.repository.telegram_bot"/>
            <argument type="service" id="app.intl_country_provider"/>
        </service>
        <service id="app.telegram_bot_creator" class="App\Service\Telegram\Bot\TelegramBotCreator" lazy="true">
            <argument type="service" id="doctrine.orm.entity_manager"/>
            <argument type="service" id="app.telegram_bot_validator"/>
        </service>
        <service id="app.telegram_bot_updater" class="App\Service\Telegram\Bot\TelegramBotUpdater" lazy="true">
            <argument type="service" id="app.telegram_bot_validator"/>
        </service>
        <service id="app.telegram_bot_webhook_url_generator"
                 class="App\Service\Telegram\Bot\TelegramBotWebhookUrlGenerator"
                 lazy="true">
            <argument>%app.telegram_webhook_base_url%</argument>
            <argument>app.telegram_site_webhook</argument>
            <argument type="service" id="Symfony\Component\Routing\Generator\UrlGeneratorInterface"/>
        </service>
        <service id="app.telegram_bot_client_factory" class="App\Service\Telegram\Bot\TelegramBotClientFactory"
                 lazy="true"/>
        <service id="app.telegram_bot_group_factory" class="App\Service\Telegram\Bot\Group\TelegramBotGroupFactory"
                 lazy="true">
            <argument type="tagged_locator" tag="app.telegram_group" index-by="group"/>
        </service>
        <service id="app.telegram_bot_conversation_factory_default"
                 class="App\Service\Telegram\Bot\Conversation\TelegramBotConversationFactory" lazy="true">
            <argument type="tagged_locator" tag="app.telegram_conversation_default"/>
        </service>
        <service id="app.telegram_bot_factory" class="App\Service\Telegram\Bot\TelegramBotFactory" lazy="true">
            <argument type="service" id="app.telegram_bot_client_registry"/>
            <argument type="service" id="app.telegram_bot_request_checker"/>
            <argument type="service" id="logger"/>
        </service>
        <service id="app.telegram_bot_conversation_manager"
                 class="App\Service\Telegram\Bot\Conversation\TelegramBotConversationManager" lazy="true">
            <argument type="service" id="app.telegram_bot_aware_helper"/>
            <argument type="service" id="app.repository.telegram_bot_conversation"/>
            <argument type="service" id="doctrine.orm.entity_manager"/>
            <argument type="service" id="serializer"/>
            <argument type="service" id="serializer"/>
            <argument type="service" id="app.array_null_filter"/>
            <argument type="service" id="app.telegram_bot_group_registry"/>
            <argument type="service" id="app.telegram_bot_chat_provider"/>
        </service>
        <service id="app.telegram_bot_my_commands_provider"
                 class="App\Service\Telegram\Bot\TelegramBotMyCommandsProvider"
                 lazy="true">
            <argument type="service" id="app.telegram_bot_group_registry"/>
        </service>
        <service id="app.telegram_bot_webhook_syncer" class="App\Service\Telegram\Bot\Api\TelegramBotWebhookSyncer"
                 lazy="true">
            <argument type="service" id="app.telegram_bot_registry"/>
            <argument type="service" id="app.telegram_bot_webhook_url_generator"/>
        </service>
        <service id="app.telegram_bot_webhook_remover" class="App\Service\Telegram\Bot\Api\TelegramBotWebhookRemover"
                 lazy="true">
            <argument type="service" id="app.telegram_bot_registry"/>
        </service>
        <service id="app.telegram_bot_webhook_info_provider"
                 class="App\Service\Telegram\Bot\TelegramBotWebhookInfoProvider"
                 lazy="true">
            <argument type="service" id="app.telegram_bot_registry"/>
        </service>
        <service id="app.telegram_bot_user_provider" class="App\Service\Telegram\Bot\TelegramBotUserProvider"
                 lazy="true"/>
        <service id="app.telegram_bot_chat_provider" class="App\Service\Telegram\Bot\TelegramBotChatProvider"
                 lazy="true"/>
        <service id="app.telegram_input_provider" class="App\Service\Telegram\Bot\TelegramBotInputProvider"
                 lazy="true"/>
        <service id="app.telegram_bot_messenger_user_upserter"
                 class="App\Service\Telegram\Bot\TelegramBotMessengerUserUpserter" lazy="true">
            <argument type="service" id="app.telegram_bot_user_provider"/>
            <argument type="service" id="app.messenger_user_upserter"/>
            <argument type="service" id="app.user_upserter"/>
            <argument type="service" id="app.intl_country_provider"/>
        </service>
        <service id="app.telegram_bot_update_checker" class="App\Service\Telegram\Bot\TelegramBotUpdateChecker"
                 lazy="true">
            <argument type="service" id="app.repository.telegram_bot_update"/>
            <argument type="service" id="doctrine.orm.entity_manager"/>
            <argument type="service" id="logger"/>
        </service>
        <service id="app.telegram_bot_request_checker" class="App\Service\Telegram\Bot\TelegramBotRequestChecker"
                 lazy="true">
            <argument type="service" id="app.repository.telegram_bot_request"/>
            <argument type="service" id="doctrine.orm.entity_manager"/>
        </service>
        <service id="app.telegram_bot_non_admin_update_checker"
                 class="App\Service\Telegram\Bot\TelegramBotNonAdminUpdateChecker" lazy="true">
            <argument type="service" id="app.telegram_bot_user_provider"/>
        </service>
        <service id="app.telegram_bot_command_finder" class="App\Service\Telegram\Bot\TelegramBotCommandFinder"
                 lazy="true"/>
        <service id="app.telegram_bot_update_factory" class="App\Service\Telegram\Bot\TelegramBotUpdateFactory"
                 lazy="true">
            <argument type="service" id="logger"/>
        </service>
        <service id="app.telegram_bot_locale_switcher" class="App\Service\Telegram\Bot\TelegramBotLocaleSwitcher"
                 lazy="true">
            <argument type="service" id="translation.locale_switcher"/>
            <argument type="service" id="app.intl_country_provider"/>
        </service>
        <service id="app.telegram_bot_update_handler" class="App\Service\Telegram\Bot\TelegramBotUpdateHandler"
                 lazy="true">
            <argument>%kernel.environment%</argument>
            <argument type="service" id="app.telegram_bot_update_factory"/>
            <argument type="service" id="app.telegram_bot_update_checker"/>
            <argument type="service" id="app.telegram_bot_non_admin_update_checker"/>
            <argument type="service" id="app.telegram_bot_conversation_manager"/>
            <argument type="service" id="app.telegram_bot_messenger_user_upserter"/>
            <argument type="service" id="app.telegram_bot_group_registry"/>
            <argument type="service" id="app.telegram_bot_command_finder"/>
            <argument type="service" id="app.telegram_bot_payment_manager"/>
            <argument type="service" id="app.telegram_bot_locale_switcher"/>
            <argument type="service" id="app.telegram_input_provider"/>
            <argument type="service" id="doctrine.orm.entity_manager"/>
            <argument type="service" id="app.telegram_bot_registry"/>
            <argument type="service" id="logger"/>
        </service>
        <service id="app.telegram_bot_keyboard_factory" class="App\Service\Telegram\Bot\TelegramBotKeyboardFactory"
                 lazy="true"/>
        <service id="app.telegram_bot_commands_syncer" class="App\Service\Telegram\Bot\Api\TelegramBotCommandsSyncer"
                 lazy="true">
            <argument type="service" id="app.telegram_bot_registry"/>
            <argument type="service" id="app.translator"/>
            <argument type="service" id="app.telegram_bot_my_commands_provider"/>
        </service>
        <service id="app.telegram_bot_commands_remover" class="App\Service\Telegram\Bot\Api\TelegramBotCommandsRemover"
                 lazy="true">
            <argument type="service" id="app.telegram_bot_registry"/>
            <argument type="service" id="app.telegram_bot_my_commands_provider"/>
        </service>
        <service id="app.telegram_bot_descriptions_syncer"
                 class="App\Service\Telegram\Bot\Api\TelegramBotDescriptionsSyncer"
                 lazy="true">
            <argument type="service" id="app.telegram_bot_registry"/>
            <argument type="service" id="app.site_url_generator"/>
            <argument type="service" id="app.translator"/>
        </service>
        <service id="app.telegram_bot_message_sender" class="App\Service\Telegram\Bot\Api\TelegramBotMessageSender"
                 lazy="true">
            <argument type="service" id="app.telegram_bot_registry"/>
        </service>
        <service id="app.telegram_bot_chat_action_sender"
                 class="App\Service\Telegram\Bot\Api\TelegramBotChatActionSender"
                 lazy="true"/>
        <service id="app.telegram_bot_client_registry" class="App\Service\Telegram\Bot\TelegramBotClientRegistry"
                 lazy="true">
            <argument type="service" id="app.telegram_bot_client_factory"/>
        </service>
        <service id="app.telegram_bot_group_registry" class="App\Service\Telegram\Bot\Group\TelegramBotGroupRegistry"
                 lazy="true">
            <argument type="service" id="app.telegram_bot_group_factory"/>
        </service>
        <service id="app.telegram_messenger_user_maker" class="App\Service\Telegram\TelegramMessengerUserMaker"
                 lazy="true"/>
        <service id="app.telegram_bot_payment_manager_options_factory"
                 class="App\Service\Telegram\Bot\TelegramBotPaymentManagerOptionsFactory" lazy="true"/>
        <service id="app.telegram_bot_payment_manager_options"
                 class="App\Entity\Telegram\TelegramBotPaymentManagerOptions">
            <factory service="app.telegram_bot_payment_manager_options_factory"/>
            <argument>%app.telegram_bot_payment_manager_options%</argument>
        </service>
        <service id="app.telegram_bot_payment_manager"
                 class="App\Service\Telegram\Bot\Payment\TelegramBotPaymentManager"
                 lazy="true">
            <argument type="service" id="app.telegram_bot_payment_manager_options"/>
            <argument type="service" id="app.telegram_bot_invoice_sender"/>
            <argument type="service" id="app.intl_currency_provider"/>
            <argument type="service" id="doctrine.orm.entity_manager"/>
            <argument type="service" id="app.repository.telegram_bot_payment"/>
            <argument type="service" id="app.uuid_generator"/>
            <argument type="service" id="app.logger_activity"/>
        </service>
        <service id="app.telegram_bot_registry" class="App\Service\Telegram\Bot\TelegramBotRegistry" lazy="true">
            <argument type="service" id="app.telegram_bot_factory"/>
        </service>
        <service id="app.telegram_bot_aware_helper" class="App\Service\Telegram\Bot\TelegramBotAwareHelper" lazy="true">
            <argument type="service" id="app.telegram_bot_keyboard_factory"/>
            <argument type="service" id="app.telegram_bot_message_sender"/>
            <argument type="service" id="app.translator"/>
            <argument type="service" id="app.telegram_bot_conversation_manager"/>
            <argument type="service" id="app.telegram_bot_chat_action_sender"/>
            <argument type="service" id="app.telegram_bot_chat_provider"/>
            <argument type="service" id="app.telegram_input_provider"/>
            <argument type="service" id="twig"/>
        </service>
        <service id="app.telegram_bot_invoice_sender" class="App\Service\Telegram\Bot\Api\TelegramBotInvoiceSender"
                 lazy="true"/>
        <service id="app.telegram_bot_payment_method_creator"
                 class="App\Service\Telegram\Bot\Payment\TelegramBotPaymentMethodCreator" lazy="true">
            <argument type="service" id="app.intl_currency_provider"/>
            <argument type="service" id="doctrine.orm.entity_manager"/>
        </service>
        <service id="app.telegram_bot_payment_method_info_provider"
                 class="App\Service\Telegram\Bot\Payment\TelegramBotPaymentMethodInfoProvider" lazy="true"/>
        <service id="app.telegram_bot_matches_provider"
                 class="App\Service\Telegram\Bot\TelegramBotMatchesProvider" lazy="true">
            <argument type="service" id="app.repository.telegram_bot"/>
        </service>
        <service id="app.telegram_bot_matches_chat_sender"
                 class="App\Service\Telegram\Bot\Chat\TelegramBotMatchesChatSender" lazy="true">
            <argument type="service" id="app.telegram_bot_matches_provider"/>
            <argument type="service" id="app.intl_country_provider"/>
            <argument type="service" id="app.intl_locale_provider"/>
            <argument type="service" id="app.telegram_link_provider"/>
        </service>
        <service id="app.telegram_bot_site_view_response_factory"
                 class="App\Service\Telegram\Bot\Site\TelegramSiteViewResponseFactory" lazy="true">
            <argument type="service" id="twig"/>
            <argument type="service" id="translation.locale_switcher"/>
            <argument type="service" id="app.intl_country_provider"/>
            <argument type="service" id="app.intl_locale_provider"/>
            <argument type="service" id="app.contact_options_factory"/>
            <argument type="service" id="app.repository.telegram_bot"/>
        </service>
        <service id="app.telegram_bot_importer" class="App\Service\Telegram\Bot\TelegramBotImporter" lazy="true">
            <argument type="service" id="app.repository.telegram_bot"/>
            <argument type="service" id="app.telegram_bot_creator"/>
            <argument type="service" id="app.telegram_bot_updater"/>
            <argument type="service" id="app.telegram_bot_remover"/>
            <argument type="service" id="app.telegram_bot_descriptions_syncer"/>
            <argument type="service" id="app.telegram_bot_webhook_syncer"/>
            <argument type="service" id="app.intl_country_provider"/>
            <argument type="service" id="app.intl_locale_provider"/>
            <argument type="service" id="app.csv_file_walker"/>
            <argument type="service" id="doctrine.orm.entity_manager"/>
            <argument>%app.stage%</argument>
        </service>
        <service id="app.telegram_channel_remover" class="App\Service\Telegram\Channel\TelegramChannelRemover"
                 lazy="true"/>
        <service id="app.telegram_channel_validator" class="App\Service\Telegram\Channel\TelegramChannelValidator"
                 lazy="true">
            <argument type="service" id="app.repository.telegram_channel"/>
            <argument type="service" id="app.intl_country_provider"/>
        </service>
        <service id="app.telegram_channel_creator" class="App\Service\Telegram\Channel\TelegramChannelCreator"
                 lazy="true">
            <argument type="service" id="doctrine.orm.entity_manager"/>
            <argument type="service" id="app.telegram_channel_validator"/>
        </service>
        <service id="app.telegram_channel_updater" class="App\Service\Telegram\Channel\TelegramChannelUpdater"
                 lazy="true">
            <argument type="service" id="app.telegram_channel_validator"/>
        </service>
        <service id="app.telegram_channel_info_provider"
                 class="App\Service\Telegram\Channel\TelegramChannelInfoProvider"
                 lazy="true"/>
        <service id="app.telegram_channel_importer" class="App\Service\Telegram\Channel\TelegramChannelImporter"
                 lazy="true">
            <argument type="service" id="app.address_provider"/>
            <argument type="service" id="app.repository.telegram_channel"/>
            <argument type="service" id="app.telegram_channel_creator"/>
            <argument type="service" id="app.telegram_channel_updater"/>
            <argument type="service" id="app.telegram_channel_remover"/>
            <argument type="service" id="app.intl_country_provider"/>
            <argument type="service" id="app.intl_locale_provider"/>
            <argument type="service" id="app.csv_file_walker"/>
            <argument type="service" id="doctrine.orm.entity_manager"/>
            <argument>%app.stage%</argument>
        </service>
        <service id="app.telegram_channel_matches_provider"
                 class="App\Service\Telegram\Channel\TelegramChannelMatchesProvider" lazy="true">
            <argument type="service" id="app.repository.telegram_channel"/>
        </service>
    </services>
</container>