<?xml version="1.0" encoding="UTF-8" ?>
<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services
        https://symfony.com/schema/dic/services/services-1.0.xsd">

    <parameters>
        <parameter key="app.stage">%env(APP_STAGE)%</parameter>
        <parameter key="app.site_base_url">%env(SITE_BASE_URL)%</parameter>
        <parameter key="app.telegram_webhook_base_url">%env(TELEGRAM_WEBHOOK_BASE_URL)%</parameter>

        <parameter key="app.default_locale">en</parameter>
        <parameter key="app.supported_locales" type="collection">
            <parameter>en</parameter>
            <parameter>uk</parameter>
            <parameter>ru</parameter>
        </parameter>
        <parameter key="app.default_currency">USD</parameter>

        <parameter key="app.data_dir">%kernel.project_dir%/data</parameter>
        <parameter key="app.currencies_file">%app.data_dir%/currencies.json</parameter>
        <parameter key="app.countries_file">%app.data_dir%/countries.json</parameter>
        <parameter key="app.translations_dir">%kernel.project_dir%/translations</parameter>
        <parameter key="app.country_translation_file">%app.translations_dir%/countries.{locale}.yaml</parameter>
        <parameter key="app.language_translation_file">%app.translations_dir%/languages.{locale}.yaml</parameter>

        <parameter key="app.telegram_activities_token">%env(TELEGRAM_ACTIVITIES_TOKEN)%</parameter>
        <parameter key="app.telegram_activities_channel">%env(TELEGRAM_ACTIVITIES_CHANNEL)%</parameter>

        <parameter key="app.telegram_errors_token">%env(TELEGRAM_ERRORS_TOKEN)%</parameter>
        <parameter key="app.telegram_errors_channel">%env(TELEGRAM_ERRORS_CHANNEL)%</parameter>

        <parameter key="app.log_activities">%env(bool:LOG_ACTIVITIES)%</parameter>

        <parameter key="app.log_activities_feedback_create">%app.log_activities%</parameter>
        <parameter key="app.log_activities_feedback_search">%app.log_activities%</parameter>
        <parameter key="app.log_activities_telegram_payment_manager">%app.log_activities%</parameter>

        <parameter key="app.telegram_payment_manager_options" type="collection">
            <parameter key="log_activities">%app.log_activities_telegram_payment_manager%</parameter>
        </parameter>

        <parameter key="app.feedback_telegram_options" type="collection">
            <parameter key="api_token">%env(TELEGRAM_FEEDBACKS_API_TOKEN)%</parameter>
            <parameter key="username">%env(TELEGRAM_FEEDBACKS_USERNAME)%</parameter>
            <parameter key="webhook_url">%app.telegram_webhook_base_url%/telegram/webhook/feedbacks</parameter>
            <parameter key="webhook_certificate_path"/>
            <parameter key="admin_ids">%env(json:TELEGRAM_FEEDBACKS_ADMIN_IDS)%</parameter>
            <parameter key="locales">%env(json:TELEGRAM_FEEDBACKS_LANGUAGE_CODES)%</parameter>
            <parameter key="admin_chat_ids">%env(json:TELEGRAM_FEEDBACKS_ADMIN_CHAT_IDS)%</parameter>
            <parameter key="check_updates">%env(bool:TELEGRAM_FEEDBACKS_CHECK_UPDATES)%</parameter>
            <parameter key="check_requests">%env(bool:TELEGRAM_FEEDBACKS_CHECK_REQUESTS)%</parameter>
            <parameter key="process_admin_only">%env(bool:TELEGRAM_FEEDBACKS_PROCESS_ADMIN_ONLY)%</parameter>
            <parameter key="accept_payments">true</parameter>
        </parameter>

        <parameter key="app.telegram_options" type="collection">
            <parameter key="default" type="collection">
                <parameter key="api_token">0:any</parameter>
                <parameter key="username">any</parameter>
                <parameter key="webhook_url">%app.telegram_webhook_base_url%/telegram/webhook/default</parameter>
                <parameter key="webhook_certificate_path"/>
                <parameter key="admin_ids" type="collection"/>
                <parameter key="locales" type="collection">
                    <parameter>en</parameter>
                </parameter>
                <parameter key="admin_chat_ids" type="collection"/>
                <parameter key="check_updates">true</parameter>
                <parameter key="check_requests">true</parameter>
                <parameter key="process_admin_only">false</parameter>
                <parameter key="accept_payments">false</parameter>
            </parameter>
            <parameter key="feedbacks">%app.feedback_telegram_options%</parameter>
        </parameter>

        <parameter key="app.feedback_creator_options" type="collection">
            <parameter key="user_target_messenger_required">%env(bool:FEEDBACK_CREATOR_USER_TARGET_MESSENGER_REQUIRED)%</parameter>
            <parameter key="user_per_day_limit">2</parameter>
            <parameter key="user_per_month_limit">50</parameter>
            <parameter key="user_per_year_limit">300</parameter>
            <parameter key="log_activities">%app.log_activities_feedback_create%</parameter>
        </parameter>

        <parameter key="app.feedback_search_creator_options" type="collection">
            <parameter key="user_per_day_limit">3</parameter>
            <parameter key="user_per_month_limit">10</parameter>
            <parameter key="user_per_year_limit">50</parameter>
            <parameter key="log_activities">%app.log_activities_feedback_search%</parameter>
        </parameter>

        <parameter key="app.feedback_subscription_plans" type="collection">
            <parameter key="one_day" type="collection">
                <parameter key="duration">+1 day</parameter>
                <parameter key="default_price">1.99</parameter>
                <parameter key="prices" type="collection">
                    <parameter key="ua">0.99</parameter>
                </parameter>
            </parameter>
            <parameter key="three_days" type="collection">
                <parameter key="duration">+3 days</parameter>
                <parameter key="default_price">2.99</parameter>
                <parameter key="prices" type="collection">
                    <parameter key="ua">1.99</parameter>
                </parameter>
            </parameter>
            <parameter key="one_month" type="collection">
                <parameter key="duration">+1 month</parameter>
                <parameter key="default_price">4.99</parameter>
                <parameter key="prices" type="collection">
                    <parameter key="ua">3.99</parameter>
                </parameter>
            </parameter>
            <parameter key="six_months" type="collection">
                <parameter key="duration">+6 months</parameter>
                <parameter key="default_price">19.99</parameter>
                <parameter key="prices" type="collection">
                    <parameter key="ua">14.99</parameter>
                </parameter>
            </parameter>
            <parameter key="one_year" type="collection">
                <parameter key="duration">+1 year</parameter>
                <parameter key="default_price">29.99</parameter>
                <parameter key="prices" type="collection">
                    <parameter key="ua">19.99</parameter>
                </parameter>
            </parameter>
        </parameter>

        <parameter key="app.telegram_payment_methods" type="collection">
            <parameter key="portmone" type="collection">
                <parameter key="token">%env(FEEDBACKS_PORTMONE_TOKEN)%</parameter>
                <parameter key="currency">UAH</parameter>
                <parameter key="countries" type="collection">
                    <parameter>ua</parameter>
                    <parameter>ru</parameter>
                </parameter>
            </parameter>
            <parameter key="sberbank" type="collection">
                <parameter key="token">%env(FEEDBACKS_SBERBANK_TOKEN)%</parameter>
                <parameter key="currency">RUB</parameter>
                <parameter key="countries" type="collection">
                    <parameter>ru</parameter>
                </parameter>
            </parameter>
            <parameter key="stripe" type="collection">
                <parameter key="token">%env(FEEDBACKS_STRIPE_TOKEN)%</parameter>
                <parameter key="currency">USD</parameter>
            </parameter>
        </parameter>
    </parameters>
</container>
